\documentclass[a4paper,14pt,russian]{article} %draft
\usepackage[T2A]{fontenc}% Поддержка русских букв

\usepackage{luacode}



% XeTeX packages
\usepackage[cm-default]{fontspec} % or install lmodern and remove cm-default opt
%\usepackage{xunicode} % some extra unicode support
\usepackage{xltxtra} % \XeLaTeX macro



\tolerance=1000
\emergencystretch=0.74cm
\usepackage{indentfirst} %делать отступ в начале параграфа

\usepackage[pdfborder = {0 0 0}]{hyperref} %гиперссылки в документе.

\usepackage[utf8]{inputenc} % кодировка текста
\usepackage[russian]{babel} % руссификация по Бабелю
\usepackage{graphics}

%\usepackage[clean,pdf]{svg}

\usepackage{amsmath, amsfonts} % для расширенных настроек ссылок на формулы
\usepackage{extsizes} % использование шрифтов большего кегля 

\usepackage{fancyvrb} % Добавляет продвинутые Verbatim и Verb

\usepackage{epsfig} % удобно вставлять рисунки в строку текста
\usepackage[usenames,dvipsnames]{pstricks}
\usepackage{pst-grad} % For gradients
\usepackage{pst-plot} % For axes

\usepackage{graphicx,xcolor}
\usepackage{minted}

%\usepackage[MakeStamp]{eskdi}
%\usepackage[MakeStamp, SubSectInToc]{eskdi}
%\usepackage[MakeStamp, SubSubSectInToc]{eskdi}
%\usepackage[MakeStamp, ParagraphInToc]{eskdi}
%\usepackage[twoside, MakeStamp, ParagraphInToc]{eskdi}
%\usepackage{eskdi}
%\usepackage[SubSectInToc]{eskdi}
%\usepackage[SubSubSectInToc]{eskdi}
%\usepackage[ParagraphInToc]{eskdi}
%\usepackage[SubParagraphInToc]{eskdi}
%\usepackage[twoside, ParagraphInToc]{eskdi}
\usepackage[MakeEmptyStamp, SubSubSectInToc]{eskdi}
%\usepackage[twoside, MakeEmptyStamp, SubSectInToc]{eskdi}
%\usepackage[twoside, MakeEmptyStamp, ParagraphInToc]{eskdi}
%\usepackage[twoside, MakeEmptyStamp]{eskdi}
%\usepackage[MakeEmptyStamp, ParagraphInToc]{eskdi}



\usepackage{array}
\usepackage{tabularx}
\usepackage{supertabular}
\usepackage{longtable} % для создания таблиц, переносящихся на другую страницу
%\usepackage{listingsutf8}%
\usepackage{listings} % для включения листинга кода в приложения. Русский язык глючит.


\lstloadlanguages{bash,[LaTeX]TeX,MetaPost,Clean,Matlab}


\usepackage{textcomp}	% Ввод различных знаков
\usepackage{keystroke} % для отображения символов клавиш
\usepackage{bytefield} %для создания таблиц с битовыми полями
\usepackage{filecontents} %для включения в документ содержимого файлов

\usepackage{tikz} % Пакет для рмсования диаграмм
\usepackage{tikz-timing}[2009/12/09]
\usetikzlibrary{arrows}
\usepackage{tikzit}
\input{sample.tikzstyles}

\usetikzlibrary{positioning,arrows,automata,plotmarks} %В данном случае нам потребуются positioning и arrows, которые нужны для расположения элементов друг относительно друга и рисования стрелок между ними соответственно.
\usetikzlibrary{shapes,snakes}
\usepackage{schemabloc}

\usepackage{makecell} % Для многострочных ячеек таблицы
\usepackage{colortbl} % Для раскрашивания ячеек в таблицах



\gostSetStampfont{Times New Roman}%

\setromanfont{Times New Roman}
\setsansfont{Arial}
\setmonofont{Consolas}
\setmainfont{Times New Roman}


%\verbatimfont{\fontspec[Scale=1.0]{Arial} \itshape}% % Для замены стиля начертания verbatim и verb
%\verbatimfont{\fontspec[Scale=1.0]{Times New Roman}}% % Для замены стиля начертания verbatim и verb
%\renewcommand{\SetStampfontIt}{\itshape}%
%\verbatimfont{\fontspec[Scale=1.0]{Consolas}}% % Для замены стиля начертания verbatim и verb
%\newfontfamily{\gostListingfont}[Scale=1.0]{Arial Narrow} % Шрифт для листингов
%\newfontfamily{\gostListingfont}[Scale=1.0]{Consolas} % Шрифт для листингов






\input{commands.tex} %Файл включает такие команды как надчёркивание, запрещение переноса ТУ и др.




\setpage % Разметка текста на странице

\begin{document}% Начало самого документа (содержательной части)

\input{./src/title.tex} %Здесь информация о названии файла, авторах и т.д.

\maketitle % Поместили Титульный лист


%\SetEmptyPage
\SetEvenPage


\makesecondpage


\tableofcontents % Содержание


\begin{luacode}
  function rnd(num, numDecimalPlaces)
    -- Округление числа до ближайшего и
    -- обрезка незначащих нулей
    local negate = false
    if (num < 0) then
      negate = true
      num = -num
    end

    local mult = 10^(numDecimalPlaces or 0)
    num_fl = math.floor(num * mult + 0.5) / mult
    local fmt = "%."..numDecimalPlaces.."f"

    if (negate == true) then
      num_fl = -num_fl
    end

    str = string.format(fmt, num_fl):gsub('\%.', ',')
    str = str:gsub('[0]+$', '')
    str = str:gsub(',$', '')
    return tex.sprint(str)
  end

  function rnd1(num)
    return rnd(num, 1)
  end

  function rnd2(num)
    return rnd(num, 2)
  end

  function rnd3(num)
    return rnd(num, 3)
  end

  -- Загрузка кода, исполнение, получение глобальной
  -- таблицы t с результатами вычислений
  local file = io.open("calc_pollution.lua", "r")
  local code = file:read("*all")
  file:close()
  local res, calc = pcall(load('return '..code))
  t = calc()
\end{luacode}



\input{./src/01.tex}
\input{./src/02.tex}

\end{document}



